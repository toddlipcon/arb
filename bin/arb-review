#!/usr/bin/perl

use strict;
use warnings;
use FindBin;
use lib "$FindBin::Bin/../perllib/";

use Data::Dumper qw/Dumper/;

use ARB;


print "Creating review on review system...\n";

my $review = ARB::create_review();

print "Created review id " . $review->{id} . "\n";

my $review_branch = 'review-' . $review->{id};

print "Creating review branch $review_branch...\n";

system('git-checkout',
       '-b',
       $review_branch);

print "\nPushing review branch to review repository";

system("git-push",
       ARB::get_review_repository(),
       $review_branch);

print "\n" . '='x60 . "\n\n";

print "Review is created. You can see it at:\n";
print ARB::get_review_url($review->{id});

print "\n\n" . '='x60 . "\n";
